name: Build

inputs:
  dockerfile:
    required: true

runs:
  steps:
  - uses: actions/checkout@v2

  - uses: docker/setup-buildx-action@5146db6c4d81fbfd508899f851bbb3883a96ff9f

  - name: Build Quickstart Image
    run: docker buildx build -f ${{ inputs.dockerfile }} -t stellar/quickstart -o type=docker,dest=/tmp/image .

  - name: Upload Quickstart Image
    uses: actions/upload-artifact@v2
    with:
      name: image-${{ inputs.dockerfile }}
      path: /tmp/image
